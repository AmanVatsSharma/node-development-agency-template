â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  GOOGLE ADS CONVERSION TRACKING - COMPLETE FLOW                 â•‘
â•‘                         Business-Website Landing Page                           â•‘
â•‘                              Version 2.0.0 - Scalable                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PART 1: PAGE LOAD & INITIALIZATION                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User visits:
https://your-domain.com/pages/business-website
        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                               â”‚
        â–¼                                                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   app/         â”‚  â—€â”€â”€â”€â”€ Root Layout loads first â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   Next.js    â”‚
â”‚   layout.tsx   â”‚                                              â”‚   Server     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚  1. Load GoogleAdsTracking component
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <GoogleAdsTracking conversionId="AW-17606401808" />  â”‚
â”‚  - Loads gtag.js script from Google               â”‚
â”‚  - Initializes window.dataLayer[]                 â”‚
â”‚  - Configures Google Ads tag                      â”‚
â”‚  - Sets up gtag() function globally               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚  2. Scripts loaded asynchronously
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Google Tag Manager Script                      â”‚
â”‚  https://www.googletagmanager.com/gtag/js?id=AW-17606401808  â”‚
â”‚                                                  â”‚
â”‚  window.gtag = function() {                     â”‚
â”‚    dataLayer.push(arguments);                   â”‚
â”‚  }                                               â”‚
â”‚                                                  â”‚
â”‚  gtag('js', new Date());                        â”‚
â”‚  gtag('config', 'AW-17606401808');             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚  3. Page component loads
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  app/pages/business-website/page.tsx            â”‚
â”‚  - Renders all sections                         â”‚
â”‚  - Hero, Lead Form, Mobile CTA, etc.            â”‚
â”‚  - Each section has conversion tracking         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Console logs at this point:
[GoogleAdsTracking] Component initialized
[GoogleAdsTracking] Conversion ID: AW-17606401808
[GoogleAdsTracking] Google Ads script loaded successfully
[GoogleAdsTracking] gtag function is available
[Business-Website] Main page component loaded
[Business-Website] CONVERSION OPTIMIZED Page mounted


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PART 2: USER INTERACTION - FORM SUBMIT                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User fills form and clicks "Get My Free Quote Now"
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Lead Form Submit Handler                       â”‚
â”‚  app/pages/business-website/_components/        â”‚
â”‚  lead-form-section.tsx                          â”‚
â”‚                                                  â”‚
â”‚  handleSubmit = async (e) => {                  â”‚
â”‚    e.preventDefault();                          â”‚
â”‚    setLoading(true);                            â”‚
â”‚                                                  â”‚
â”‚    // Step 1: Save to database & Zoho          â”‚
â”‚    const res = await fetch('/api/lead', {      â”‚
â”‚      method: 'POST',                            â”‚
â”‚      body: JSON.stringify(formData)             â”‚
â”‚    });                                          â”‚
â”‚                                                  â”‚
â”‚    // Step 2: Fire conversion                   â”‚
â”‚    fireConversion('business_website_lead_submit');â”‚
â”‚  }                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”œâ”€â”€â”€â”€ PARALLEL EXECUTION â”€â”€â”€â”€â”
                      â”‚                             â”‚
                      â–¼                             â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  POST /api/lead     â”‚      â”‚  fireConversion()   â”‚
         â”‚  (Database & Zoho)  â”‚      â”‚  (Google Ads)       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                             â”‚
                   â”‚                             â”‚
         [See PART 3 below]          [See PART 4 below]


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PART 3: DATABASE & ZOHO INTEGRATION                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

POST /api/lead
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  app/api/lead/route.ts                          â”‚
â”‚                                                  â”‚
â”‚  1. Validate input (name, email, phone)         â”‚
â”‚  2. Save to PostgreSQL database (Lead table)    â”‚
â”‚     status: 'pending'                           â”‚
â”‚                                                  â”‚
â”‚  3. Get Zoho access token                       â”‚
â”‚     - Check if expired                          â”‚
â”‚     - Refresh if needed                         â”‚
â”‚                                                  â”‚
â”‚  4. Send to Zoho CRM API                        â”‚
â”‚     POST https://www.zohoapis.in/crm/v2/Leads   â”‚
â”‚     Authorization: Zoho-oauthtoken XXX          â”‚
â”‚                                                  â”‚
â”‚  5. Update database:                            â”‚
â”‚     status: 'pushed'                            â”‚
â”‚     zohoLeadId: 'XXX'                           â”‚
â”‚                                                  â”‚
â”‚  6. Log conversion event (server-side backup)   â”‚
â”‚     await logServerConversion(                  â”‚
â”‚       'business_website_lead_submit',           â”‚
â”‚       { leadId, zohoLeadId }                    â”‚
â”‚     )                                            â”‚
â”‚                                                  â”‚
â”‚  7. Return success + conversion mapping         â”‚
â”‚     { success: true, leadId, zohoLeadId,       â”‚
â”‚       google: { conversionId, labels } }       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚  Database writes:
                      â”‚
                      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚                                  â”‚
                      â–¼                                  â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Lead table         â”‚         â”‚  IntegrationLog      â”‚
         â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚         â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
         â”‚  id: xxx            â”‚         â”‚  type: business_     â”‚
         â”‚  name: John Doe     â”‚         â”‚        website_lead_  â”‚
         â”‚  phone: +91 999...  â”‚         â”‚        submit        â”‚
         â”‚  email: john@...    â”‚         â”‚  provider: google_adsâ”‚
         â”‚  status: pushed     â”‚         â”‚  level: info         â”‚
         â”‚  zohoLeadId: 123    â”‚         â”‚  message: Conversion â”‚
         â”‚  createdAt: ...     â”‚         â”‚           event      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚           logged     â”‚
                                          â”‚  createdAt: ...      â”‚
                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PART 4: GOOGLE ADS CONVERSION TRACKING                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

fireConversion('business_website_lead_submit')
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  utils/conversions.ts                                                        â”‚
â”‚                                                                              â”‚
â”‚  Step 1: SERVER-SIDE BACKUP LOG                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  void fetch('/api/track', {                                                 â”‚
â”‚    method: 'POST',                                                          â”‚
â”‚    body: JSON.stringify({                                                   â”‚
â”‚      eventType: 'business_website_lead_submit',                            â”‚
â”‚      ts: Date.now(),                                                        â”‚
â”‚      userAgent: navigator.userAgent,                                        â”‚
â”‚      pageUrl: window.location.href                                          â”‚
â”‚    })                                                                        â”‚
â”‚  });                                                                         â”‚
â”‚                                                                              â”‚
â”‚  Console: [Conversions] âœ… Server-side backup log dispatched               â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                                              â”‚
â”‚  Step 2: FETCH CONVERSION MAPPING FROM DATABASE                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  const mapping = await getMapping();                                        â”‚
â”‚    â””â”€â”€â–¶ GET /api/google-config                                             â”‚
â”‚          â””â”€â”€â–¶ Read from IntegrationSettings table                          â”‚
â”‚                {                                                            â”‚
â”‚                  conversionId: "AW-17606401808",                           â”‚
â”‚                  labels: {                                                  â”‚
â”‚                    business_website_lead_submit: "Y3bsCKXpn6gbEJC-sctB"   â”‚
â”‚                  }                                                          â”‚
â”‚                }                                                            â”‚
â”‚                                                                              â”‚
â”‚  Console: [Conversions] âœ… Mapping retrieved                               â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                                              â”‚
â”‚  Step 3: BUILD CONVERSION PAYLOAD                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  label = mapping.labels['business_website_lead_submit']                    â”‚
â”‚        = "Y3bsCKXpn6gbEJC-sctB"                                            â”‚
â”‚                                                                              â”‚
â”‚  sendTo = mapping.conversionId + "/" + label                               â”‚
â”‚         = "AW-17606401808/Y3bsCKXpn6gbEJC-sctB"                           â”‚
â”‚                                                                              â”‚
â”‚  params = {                                                                 â”‚
â”‚    send_to: "AW-17606401808/Y3bsCKXpn6gbEJC-sctB"                         â”‚
â”‚  }                                                                           â”‚
â”‚                                                                              â”‚
â”‚  Console: [Conversions] Label for event type: Y3bsCKXpn6gbEJC-sctB        â”‚
â”‚           [Conversions] Send To: AW-17606401808/Y3bsCKXpn6gbEJC-sctB      â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                                              â”‚
â”‚  Step 4: FIRE CLIENT-SIDE GTAG CONVERSION                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  window.gtag('event', 'conversion', params);                               â”‚
â”‚    â””â”€â”€â–¶ Pushes to dataLayer                                                â”‚
â”‚          â””â”€â”€â–¶ Sent to Google Analytics/Ads servers                         â”‚
â”‚                â””â”€â”€â–¶ Conversion recorded in Google Ads!                     â”‚
â”‚                                                                              â”‚
â”‚  Console: [Conversions] âœ… gtag function is available                     â”‚
â”‚           [Conversions] Conversion parameters: {...}                       â”‚
â”‚           [Conversions] âœ… CONVERSION FIRED SUCCESSFULLY                  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚  Network request to Google:
                               â”‚
                               â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  https://www.google-analytics.com/   â”‚
                â”‚  g/collect?...                        â”‚
                â”‚                                       â”‚
                â”‚  Payload includes:                    â”‚
                â”‚  - Conversion ID                      â”‚
                â”‚  - Conversion Label                   â”‚
                â”‚  - Timestamp                          â”‚
                â”‚  - User info (cookie-based)           â”‚
                â”‚  - Page URL                           â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚  Google Ads      â”‚
                     â”‚  Servers         â”‚
                     â”‚                  â”‚
                     â”‚  Conversion      â”‚
                     â”‚  Recorded! âœ…    â”‚
                     â”‚                  â”‚
                     â”‚  (Appears in     â”‚
                     â”‚  dashboard in    â”‚
                     â”‚  3-24 hours)     â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PART 5: WHATSAPP & CALL BUTTON CLICKS                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User clicks "WhatsApp us" button
        â”‚
        â–¼
onClick={() => {
  console.log('[Business-Website] WhatsApp clicked - Opening WhatsApp');
  fireConversion('business_website_whatsapp_click');
}}
        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                              â”‚
        â–¼                                              â–¼
Opens WhatsApp:                         Conversion tracking:
https://wa.me/919963730111              fireConversion('business_website_whatsapp_click')
        â”‚                                              â”‚
        â”‚                                              â–¼
        â”‚                               [Same flow as PART 4]
        â”‚                               Label: XO54CKjpn6gbEJC-sctB
        â”‚                               SendTo: AW-17606401808/XO54CKjpn6gbEJC-sctB
        â”‚                               gtag('event', 'conversion', {...})
        â”‚                                              â”‚
        â”‚                                              â–¼
        â”‚                               âœ… Conversion recorded in Google Ads
        â”‚
        â–¼
User chats on WhatsApp with +91 9963730111


Similarly for Call button:
onClick={() => fireConversion('business_website_call_click') }
Opens: tel:+919963730111
Label: [YOUR_CALL_LABEL]
SendTo: AW-17606401808/[YOUR_CALL_LABEL]


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PART 6: VERIFICATION & DEBUGGING                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. CONSOLE LOGS (Real-time)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   [Business-Website] Lead form submitted
   [Conversions] ğŸ¯ CONVERSION EVENT TRIGGERED
   [Conversions] Event Type: business_website_lead_submit
   [Conversions] Step 1: Sending server-side backup log
   [Conversions] âœ… Server-side backup log dispatched
   [Conversions] Step 2: Fetching conversion mapping
   [Conversions] âœ… Mapping retrieved
   [Conversions] Step 3: Building conversion payload
   [Conversions] Label for event type: Y3bsCKXpn6gbEJC-sctB
   [Conversions] Send To: AW-17606401808/Y3bsCKXpn6gbEJC-sctB
   [Conversions] Step 4: Firing client-side gtag conversion
   [Conversions] âœ… gtag function is available
   [Conversions] âœ… CONVERSION FIRED SUCCESSFULLY

2. NETWORK TAB (Chrome DevTools)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   âœ… POST /api/lead â†’ 200 OK
   âœ… POST /api/track â†’ 200 OK
   âœ… GET /api/google-config â†’ 200 OK
   âœ… GET https://www.google-analytics.com/g/collect?... â†’ 200 OK
      â†‘ This is the conversion tracking pixel

3. DATABASE VERIFICATION
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SELECT * FROM "Lead" ORDER BY "createdAt" DESC LIMIT 1;
   âœ… Lead record exists with zohoLeadId

   SELECT * FROM "IntegrationLog" 
   WHERE type = 'business_website_lead_submit' 
   ORDER BY "createdAt" DESC LIMIT 1;
   âœ… Conversion log exists

4. ZOHO CRM VERIFICATION
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Login to Zoho â†’ Leads module
   âœ… Test lead appears with correct details

5. GOOGLE ADS DASHBOARD VERIFICATION (Wait 3-24 hours)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Google Ads â†’ Tools & Settings â†’ Conversions
   âœ… "Submit Lead Form - Business-Website" shows 1 conversion
   âœ… "Contact - WhatsApp - Business-Website" shows X conversions
   âœ… "Contact - Phone Call - Business-Website" shows X conversions


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          SCALABILITY FOR NEW PAGES                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

To add AI Voice Agents landing page:

1. Create 3 new conversion actions in Google Ads:
   - Submit Lead Form - AI-Voice-Agents â†’ Get label: xxxxx
   - Contact - WhatsApp - AI-Voice-Agents â†’ Get label: yyyyy
   - Contact - Phone Call - AI-Voice-Agents â†’ Get label: zzzzz

2. Update IntegrationSettings.googleEventLabels in database:
   {
     "business_website_lead_submit": "Y3bsCKXpn6gbEJC-sctB",
     "business_website_whatsapp_click": "XO54CKjpn6gbEJC-sctB",
     "business_website_call_click": "[CALL_LABEL]",
     "ai_voice_agents_lead_submit": "xxxxx",      â† NEW
     "ai_voice_agents_whatsapp_click": "yyyyy",   â† NEW
     "ai_voice_agents_call_click": "zzzzz"        â† NEW
   }

3. In AI Voice Agents page components, use:
   fireConversion('ai_voice_agents_lead_submit')
   fireConversion('ai_voice_agents_whatsapp_click')
   fireConversion('ai_voice_agents_call_click')

4. âœ… That's it! No other code changes needed.


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                            KEY CONFIGURATION FILES                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. app/layout.tsx
   â””â”€ <GoogleAdsTracking conversionId="AW-17606401808" />

2. utils/conversions.ts
   â””â”€ fireConversion() function with comprehensive logging

3. app/lib/googleAds.ts
   â””â”€ getGoogleConfig() - reads from database
   â””â”€ logServerConversion() - server-side backup

4. app/api/google-config/route.ts
   â””â”€ GET endpoint returning conversionId + labels

5. app/api/track/route.ts
   â””â”€ POST endpoint for server-side conversion logging

6. app/api/lead/route.ts
   â””â”€ POST endpoint for lead submission + Zoho sync

7. Database: IntegrationSettings table
   â””â”€ googleConversionId: "AW-17606401808"
   â””â”€ googleEventLabels: { ... }

8. Vercel Environment Variables
   â””â”€ GOOGLE_CONVERSION_ID
   â””â”€ GOOGLE_LEAD_SUBMIT_LABEL
   â””â”€ GOOGLE_WHATSAPP_CLICK_LABEL
   â””â”€ GOOGLE_CALL_CLICK_LABEL


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                             TROUBLESHOOTING GUIDE                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Issue: "gtag is not available"
Fix: Check GoogleAdsTracking component in layout.tsx, disable ad blocker

Issue: "No conversion label configured"
Fix: Initialize IntegrationSettings table with labels

Issue: Conversions not showing in Google Ads
Fix: Wait 24 hours, verify labels match exactly, use Google Tag Assistant

Issue: Lead saved but not in Zoho
Fix: Check IntegrationLog for errors, verify Zoho credentials

Issue: "Failed to fetch google-config"
Fix: Verify DATABASE_URL, check IntegrationSettings table exists


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              END OF FLOW DIAGRAM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•