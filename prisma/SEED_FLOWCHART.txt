╔══════════════════════════════════════════════════════════════════════════════════╗
║                                                                                  ║
║                 PRODUCTION SEED FLOWCHART - Vedpragya Bharat                     ║
║                                                                                  ║
╚══════════════════════════════════════════════════════════════════════════════════╝


                                   ┌──────────────┐
                                   │    START     │
                                   │   SEEDING    │
                                   └───────┬──────┘
                                           │
                                           ▼
                            ┌──────────────────────────┐
                            │   Load Configuration     │
                            │   - Check DATABASE_URL   │
                            │   - Initialize Prisma    │
                            └────────────┬─────────────┘
                                         │
                                         ▼
                            ┌──────────────────────────┐
                            │   Import Data Modules    │
                            │   ├─ services.ts         │
                            │   ├─ authors.ts          │
                            │   ├─ blog-posts.ts       │
                            │   ├─ blog-posts-part2.ts │
                            │   └─ resources.ts        │
                            └────────────┬─────────────┘
                                         │
                                         ▼
        ╔════════════════════════════════════════════════════════════════════╗
        ║                     STEP 1: SEED AUTHORS                           ║
        ╚════════════════════════════════════════════════════════════════════╝
                                         │
                            ┌────────────▼─────────────┐
                            │  Loop through authorsData│
                            │  (5 authors)             │
                            └────────────┬─────────────┘
                                         │
                     ┌───────────────────┴────────────────────┐
                     │                                        │
                     ▼                                        ▼
        ┌───────────────────────┐              ┌───────────────────────┐
        │   Check if author     │              │   Create Author Map   │
        │   exists by email     │              │   email → id          │
        │                       │              │   (for blog posts)    │
        │   - YES: Update       │              └───────────┬───────────┘
        │   - NO: Create        │                          │
        └──────────┬────────────┘                          │
                   │                                       │
                   └───────────────────┬───────────────────┘
                                       │
                                       ▼
                           ┌────────────────────┐
                           │  Log Success:      │
                           │  "✅ Author created"│
                           └────────────────────┘
                                       │
                                       ▼
        ╔════════════════════════════════════════════════════════════════════╗
        ║                     STEP 2: SEED SERVICES                          ║
        ╚════════════════════════════════════════════════════════════════════╝
                                       │
                           ┌───────────▼────────────┐
                           │ Loop through           │
                           │ servicesData           │
                           │ (15 services)          │
                           └───────────┬────────────┘
                                       │
                     ┌─────────────────┴──────────────────┐
                     │                                    │
                     ▼                                    ▼
        ┌────────────────────────┐          ┌────────────────────────┐
        │ Check if service       │          │ Set service details:   │
        │ exists by slug         │          │ - title, description   │
        │                        │          │ - icon, imageUrl       │
        │ - YES: Update          │          │ - order, featured      │
        │ - NO: Create           │          └────────────────────────┘
        └───────────┬────────────┘
                    │
                    ▼
        ┌────────────────────────┐
        │ Log Success:           │
        │ "✅ Service created"    │
        └────────────────────────┘
                    │
                    ▼
        ╔════════════════════════════════════════════════════════════════════╗
        ║                   STEP 3: SEED BLOG POSTS                          ║
        ╚════════════════════════════════════════════════════════════════════╝
                    │
        ┌───────────▼────────────┐
        │ Merge blog post arrays │
        │ - blogPostsData        │
        │ - blogPostsPart2Data   │
        │ Total: 20+ posts       │
        └───────────┬────────────┘
                    │
        ┌───────────▼────────────┐
        │ Loop through all posts │
        └───────────┬────────────┘
                    │
        ┌───────────▼────────────────────────┐
        │ Get author ID from map             │
        │ using post.authorEmail             │
        └───────────┬────────────────────────┘
                    │
                    ├─ Author Found? ─┐
                    │                 │
                    ▼                 ▼
        ┌────────────────┐  ┌──────────────────┐
        │   YES: Create  │  │   NO: Skip post  │
        │   blog post    │  │   Log error      │
        │   - Link to    │  └──────────────────┘
        │     author     │
        │   - Set tags   │
        │   - Category   │
        │   - Featured   │
        └────────┬───────┘
                 │
                 ▼
        ┌────────────────────┐
        │ Log Success:       │
        │ "✅ Post created"   │
        └────────────────────┘
                 │
                 ▼
        ╔════════════════════════════════════════════════════════════════════╗
        ║                    STEP 4: SEED RESOURCES                          ║
        ╚════════════════════════════════════════════════════════════════════╝
                 │
        ┌────────▼─────────────┐
        │ Loop through         │
        │ resourcesData        │
        │ (15+ resources)      │
        └────────┬─────────────┘
                 │
        ┌────────▼──────────────────┐
        │ Generate unique ID        │
        │ type + slug-from-title    │
        └────────┬──────────────────┘
                 │
        ┌────────▼──────────────┐
        │ Upsert resource:      │
        │ - title, description  │
        │ - type, downloadUrl   │
        │ - imageUrl, featured  │
        └────────┬──────────────┘
                 │
                 ▼
        ┌────────────────────┐
        │ Log Success:       │
        │ "✅ Resource added" │
        └────────────────────┘
                 │
                 ▼
        ╔════════════════════════════════════════════════════════════════════╗
        ║                 STEP 5: CREATE ADMIN USER                          ║
        ╚════════════════════════════════════════════════════════════════════╝
                 │
        ┌────────▼─────────────────┐
        │ Credentials:             │
        │ - Email: admin@...       │
        │ - Password: Admin@2025   │
        └────────┬─────────────────┘
                 │
        ┌────────▼─────────────────┐
        │ Hash password with       │
        │ bcrypt (10 rounds)       │
        └────────┬─────────────────┘
                 │
        ┌────────▼─────────────────┐
        │ Upsert admin user:       │
        │ - role: 'admin'          │
        │ - active: true           │
        └────────┬─────────────────┘
                 │
                 ▼
        ┌────────────────────┐
        │ Log Success:       │
        │ "✅ Admin created"  │
        │ Show credentials   │
        └────────────────────┘
                 │
                 ▼
        ╔════════════════════════════════════════════════════════════════════╗
        ║                   STEP 6: SEED TEAM MEMBERS                        ║
        ╚════════════════════════════════════════════════════════════════════╝
                 │
        ┌────────▼─────────────┐
        │ Loop through         │
        │ teamMembers array    │
        │ (3 members)          │
        └────────┬─────────────┘
                 │
        ┌────────▼──────────────┐
        │ Upsert team member:   │
        │ - name, position, bio │
        │ - avatar, links       │
        │ - order, active       │
        └────────┬──────────────┘
                 │
                 ▼
        ┌────────────────────┐
        │ Log Success:       │
        │ "✅ Member added"   │
        └────────────────────┘
                 │
                 ▼
        ╔════════════════════════════════════════════════════════════════════╗
        ║                     GENERATE SUMMARY REPORT                        ║
        ╚════════════════════════════════════════════════════════════════════╝
                 │
        ┌────────▼─────────────────────┐
        │ Count all records:           │
        │ - Authors                    │
        │ - Services                   │
        │ - Blog Posts                 │
        │ - Resources                  │
        │ - Users                      │
        │ - Team Members               │
        └────────┬─────────────────────┘
                 │
        ┌────────▼─────────────────────┐
        │ Display Summary:             │
        │ ✨ SUCCESS MESSAGE            │
        │ 📊 Record counts             │
        │ 📝 Next steps                │
        │ 🔐 Admin credentials         │
        └────────┬─────────────────────┘
                 │
                 ▼
        ┌────────────────────┐
        │ Disconnect Prisma  │
        │ Close DB connection│
        └────────┬───────────┘
                 │
                 ▼
        ┌────────────────────┐
        │    ✅ COMPLETE      │
        │  Database Ready!   │
        └────────────────────┘


╔══════════════════════════════════════════════════════════════════════════════════╗
║                              ERROR HANDLING FLOW                                 ║
╚══════════════════════════════════════════════════════════════════════════════════╝

                        ┌──────────────────┐
                        │  Any step fails  │
                        └────────┬─────────┘
                                 │
                ┌────────────────┴────────────────┐
                │                                 │
                ▼                                 ▼
    ┌─────────────────────┐         ┌──────────────────────┐
    │ Item-level error?   │         │ Fatal error?         │
    │ (e.g., one post)    │         │ (e.g., DB connection)│
    └─────────┬───────────┘         └──────────┬───────────┘
              │                                 │
              ▼                                 ▼
    ┌─────────────────────┐         ┌──────────────────────┐
    │ Log error           │         │ Throw exception      │
    │ Continue with next  │         │ Rollback if needed   │
    │ Show in summary     │         │ Exit with code 1     │
    └─────────────────────┘         └──────────────────────┘


╔══════════════════════════════════════════════════════════════════════════════════╗
║                              DATA DEPENDENCIES                                   ║
╚══════════════════════════════════════════════════════════════════════════════════╝

    Authors
       │
       │ (required for)
       │
       ▼
    Blog Posts ────────┐
                       │
    Services           │ (all independent)
                       │
    Resources          │
                       │
    Admin User         │
                       │
    Team Members ──────┘


╔══════════════════════════════════════════════════════════════════════════════════╗
║                            EXECUTION COMMANDS                                    ║
╚══════════════════════════════════════════════════════════════════════════════════╝

    1. Full Production Seed:
       $ npm run db:seed:production

    2. Verify Results:
       $ npm run db:verify

    3. View Database:
       $ npm run db:studio

    4. Reset (if needed):
       $ npx prisma migrate reset
       $ npm run db:seed:production


╔══════════════════════════════════════════════════════════════════════════════════╗
║                              SUCCESS CRITERIA                                    ║
╚══════════════════════════════════════════════════════════════════════════════════╝

    ✅ 5 Authors created
    ✅ 15 Services created (3-5 featured)
    ✅ 20+ Blog Posts created (2-3 featured)
    ✅ 15+ Resources created (2-3 featured)
    ✅ 1 Admin user created (role: admin, active: true)
    ✅ 3 Team members created
    ✅ All relationships intact (posts → authors)
    ✅ No duplicate records
    ✅ Admin dashboard accessible at /admin


═══════════════════════════════════════════════════════════════════════════════════
                              END OF FLOWCHART
═══════════════════════════════════════════════════════════════════════════════════
